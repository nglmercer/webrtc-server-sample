import{e as r}from"./Emitter.7_0WgsaW.js";import{M as z}from"./MaterialIcon.CkThZV9C.js";import{_ as C}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as L,c as l,a as e,h as d,t as i,F as k,i as M,r as f,o as I,f as R,g as c,n as E}from"./runtime-core.esm-bundler.cWTXz6wy.js";/* empty css                       */const D=L({__name:"RoomList",props:{userId:{default:"user"}},emits:["roomSelected"],setup(b,{expose:o,emit:v}){o();const t=b,m=v,u=f([]),s=f(!1),a=f(null),p=()=>{s.value=!0,a.value=null,r.emit("requestRooms")},S=n=>{m("roomSelected",n);const y=new CustomEvent("roomSelected",{detail:{roomName:n},bubbles:!0});document.dispatchEvent(y)},w=n=>{try{return new Date(n).toLocaleString("es-ES",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})}catch{return"Fecha inválida"}},_=n=>{u.value=n,s.value=!1,a.value=null},x=n=>{a.value=n,s.value=!1},h=n=>{n?(a.value=null,p()):a.value="Conexión perdida con el servidor"};I(()=>{r.on("rooms",_),r.on("roomsError",x),r.on("connectionStatus",h),p()}),R(()=>{r.off("rooms",_),r.off("roomsError",x),r.off("connectionStatus",h)});const g={props:t,emit:m,roomList:u,isLoading:s,error:a,refreshRooms:p,joinRoom:S,formatDate:w,handleRoomsUpdate:_,handleRoomsError:x,handleConnectionStatus:h,MaterialIcon:z};return Object.defineProperty(g,"__isScriptSetup",{enumerable:!1,value:!0}),g}}),j={class:"room-list"},F={class:"room-list-header"},J=["disabled"],B={key:0,class:"loading-state"},U={key:1,class:"error-state"},A={class:"bg-red-500/20 border border-red-500/50 rounded-lg p-4 text-red-200"},N={class:"ml-2"},P={key:2,class:"empty-state"},V={class:"text-center py-8 text-white/60"},q={key:3,class:"rooms-grid"},O={class:"room-header flex items-center justify-between mb-3"},G={class:"font-semibold text-white truncate"},H={class:"room-info space-y-2 text-sm text-white/70"},K={class:"flex items-center"},Q={class:"ml-1"},T={class:"flex items-center"},W={class:"ml-1"},X={class:"flex items-center"},Y={class:"ml-1"},Z={class:"room-actions mt-4"},$=["onClick","disabled"],ee={class:"ml-1"};function te(b,o,v,t,m,u){return c(),l("div",j,[e("div",F,[o[1]||(o[1]=e("h3",{class:"text-xl font-semibold text-white mb-4"}," Salas Disponibles ",-1)),e("button",{onClick:t.refreshRooms,disabled:t.isLoading,class:"refresh-btn bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg transition-colors duration-200 disabled:opacity-50"},[d(t.MaterialIcon,{icon:"refresh",size:"text-sm",customSize:"16px"}),o[0]||(o[0]=e("span",{class:"ml-1"},"Actualizar",-1))],8,J)]),t.isLoading?(c(),l("div",B,o[2]||(o[2]=[e("div",{class:"flex items-center justify-center py-8"},[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"}),e("span",{class:"ml-3 text-white"},"Cargando salas...")],-1)]))):t.error?(c(),l("div",U,[e("div",A,[d(t.MaterialIcon,{icon:"error",size:"text-lg",customSize:"20px"}),e("span",N,i(t.error),1)])])):t.roomList.length===0?(c(),l("div",P,[e("div",V,[d(t.MaterialIcon,{icon:"meeting_room",size:"text-4xl",customSize:"48px"}),o[3]||(o[3]=e("p",{class:"mt-2"},"No hay salas disponibles",-1)),o[4]||(o[4]=e("p",{class:"text-sm"},"Crea una nueva sala para comenzar",-1))])])):(c(),l("div",q,[(c(!0),l(k,null,M(t.roomList,s=>(c(),l("div",{key:s.name,class:"room-card bg-white/10 backdrop-blur-md rounded-xl border border-white/20 p-4 hover:bg-white/15 transition-all duration-200"},[e("div",O,[e("h4",G,i(s.name),1),e("span",{class:E(["px-2 py-1 rounded-full text-xs font-medium",s.canJoin?"bg-green-500/20 text-green-300":"bg-red-500/20 text-red-300"])},i(s.canJoin?"Disponible":"Llena"),3)]),e("div",H,[e("div",K,[d(t.MaterialIcon,{icon:"person",size:"text-sm",customSize:"14px"}),e("span",Q,"Creador: "+i(s.owner),1)]),e("div",T,[d(t.MaterialIcon,{icon:"group",size:"text-sm",customSize:"14px"}),e("span",W,i(s.participantCount)+"/"+i(s.maxParticipants)+" participantes ",1)]),e("div",X,[d(t.MaterialIcon,{icon:"schedule",size:"text-sm",customSize:"14px"}),e("span",Y,"Creada: "+i(t.formatDate(s.createdAt)),1)])]),e("div",Z,[e("button",{onClick:a=>t.joinRoom(s.name),disabled:!s.canJoin,class:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-2 px-4 rounded-lg transition-colors duration-200"},[d(t.MaterialIcon,{icon:"login",size:"text-sm",customSize:"16px"}),e("span",ee,i(s.canJoin?"Unirse":"Sala Llena"),1)],8,$)])]))),128))]))])}const re=C(D,[["render",te]]);export{re as default};
