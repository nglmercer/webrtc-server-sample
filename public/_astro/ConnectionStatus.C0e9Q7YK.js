import{e as n}from"./Emitter.7_0WgsaW.js";import"./socket.0sXGT_8H.js";import{_ as v}from"./_plugin-vue_export-helper.DlAUqK2U.js";import{d as h,c as l,a as d,b as p,n as g,t as r,r as u,e as R,o as y,f as S,g as m}from"./runtime-core.esm-bundler.cWTXz6wy.js";import"./apiConfig.Bhn8rpQL.js";const E=h({__name:"ConnectionStatus",setup(x,{expose:f}){f();const t=u(!1),e=u(!1),s=u(null),_=R(()=>e.value?"Reconectando...":t.value?"Conectado":"Desconectado"),C=async()=>{if(!e.value){e.value=!0;try{n.emit("requestReconnect"),setTimeout(()=>{e.value=!1},2e3)}catch(o){console.error("Error al reconectar:",o),e.value=!1}}},a=o=>{t.value=o,o&&(e.value=!1)},c=o=>{s.value=o.length},i=o=>{console.error("Error en salas:",o)};y(()=>{n.on("connectionStatus",a),n.on("rooms",c),n.on("roomsError",i)}),S(()=>{n.off("connectionStatus",a),n.off("rooms",c),n.off("roomsError",i)});const b={isConnected:t,isReconnecting:e,roomCount:s,statusText:_,reconnect:C,handleConnectionStatus:a,handleRoomsUpdate:c,handleRoomsError:i};return Object.defineProperty(b,"__isScriptSetup",{enumerable:!1,value:!0}),b}}),k={class:"connection-status"},w=["disabled"],B={key:0,class:"mt-2 text-xs text-white/60"};function T(x,f,t,e,s,_){return m(),l("div",k,[d("div",{class:g(["status-indicator flex items-center px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",e.isConnected?"bg-green-500/20 text-green-300 border border-green-500/50":"bg-red-500/20 text-red-300 border border-red-500/50"])},[d("div",{class:g(["w-2 h-2 rounded-full mr-2 transition-all duration-200",e.isConnected?"bg-green-400 animate-pulse":"bg-red-400"])},null,2),d("span",null,r(e.statusText),1),e.isConnected?p("",!0):(m(),l("button",{key:0,onClick:e.reconnect,disabled:e.isReconnecting,class:"ml-3 px-2 py-1 bg-red-600 hover:bg-red-700 disabled:bg-red-800 text-white text-xs rounded transition-colors duration-200"},r(e.isReconnecting?"Reconectando...":"Reconectar"),9,w))],2),e.isConnected&&e.roomCount!==null?(m(),l("div",B,r(e.roomCount)+" "+r(e.roomCount===1?"sala disponible":"salas disponibles"),1)):p("",!0)])}const q=v(E,[["render",T]]);export{q as default};
